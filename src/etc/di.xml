<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">

    <!-- Interface preferences -->
    <preference for="Pixelperfect\HyvaCookieConsent\Api\Data\CategoryInterface"
                type="Pixelperfect\HyvaCookieConsent\Model\Category"/>
    <preference for="Pixelperfect\HyvaCookieConsent\Api\Data\ServiceInterface"
                type="Pixelperfect\HyvaCookieConsent\Model\Service"/>

    <!-- Cookie Consent XML Configuration Reader -->
    <type name="Pixelperfect\HyvaCookieConsent\Model\Config\CookieConsent\Reader">
        <arguments>
            <argument name="fileName" xsi:type="string">cookie_consent.xml</argument>
            <argument name="converter" xsi:type="object">Pixelperfect\HyvaCookieConsent\Model\Config\CookieConsent\Converter</argument>
            <argument name="schemaLocator" xsi:type="object">Pixelperfect\HyvaCookieConsent\Model\Config\CookieConsent\SchemaLocator</argument>
        </arguments>
    </type>

    <!-- Cookie Consent Configuration Data (with caching) -->
    <type name="Pixelperfect\HyvaCookieConsent\Model\Config\CookieConsent\Data">
        <arguments>
            <argument name="reader" xsi:type="object">Pixelperfect\HyvaCookieConsent\Model\Config\CookieConsent\Reader</argument>
            <argument name="cacheId" xsi:type="string">cookie_consent_config</argument>
        </arguments>
    </type>

    <!-- Category Pool - reads categories from cookie_consent.xml -->
    <type name="Pixelperfect\HyvaCookieConsent\Model\CategoryPool">
        <arguments>
            <argument name="configData" xsi:type="object">Pixelperfect\HyvaCookieConsent\Model\Config\CookieConsent\Data</argument>
        </arguments>
    </type>

    <!-- Service Pool - reads services from cookie_consent.xml -->
    <type name="Pixelperfect\HyvaCookieConsent\Model\ServicePool">
        <arguments>
            <argument name="configData" xsi:type="object">Pixelperfect\HyvaCookieConsent\Model\Config\CookieConsent\Data</argument>
        </arguments>
    </type>
</config>
